<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape de TRON - TRON Universe</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/game.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">T</div>
                    <h1>ESCAPE DE TRON</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="../index.html">‚Üê Volver al Inicio</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <div id="user-info">
                        <span id="username-display"></span>
                        <button class="btn btn-secondary" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <section class="game-hero">
                <h2>üöÄ Escape del Grid</h2>
                <p>Demuestra que eres un verdadero usuario del sistema. Completa los desaf√≠os para escapar.</p>
                
                <div class="game-stats">
                    <div class="stat">Nivel: <span id="level">1</span></div>
                    <div class="stat">Puntuaci√≥n: <span id="score">0</span></div>
                    <div class="stat">Vidas: <span id="lives">3</span></div>
                </div>
            </section>

            <section class="game-container">
                <div class="game-grid" id="game-board">
                    <!-- El juego se renderiza aqu√≠ -->
                </div>
                
                <div class="game-controls">
                    <button class="btn btn-primary" id="start-btn">Iniciar Juego</button>
                    <button class="btn btn-secondary" id="reset-btn">Reiniciar</button>
                    <button class="btn btn-primary" id="super-link-btn" style="display: none;">
                        üîì Acceso al Super Enlace
                    </button>
                </div>

                <div class="game-info">
                    <h3>Instrucciones:</h3>
                    <p>Gu√≠a tu Light Cycle evitando los rastros de luz. Recoge discos de identidad para ganar puntos.</p>
                    <p><strong>Controles:</strong> Usa las flechas del teclado para moverte</p>
                </div>
            </section>

            <!-- Super Enlace (oculto inicialmente) -->
            <section id="super-link-section" style="display: none; margin-top: 50px;">
                <div class="super-link-container">
                    <h2>üéâ ¬°Felicidades! Has completado el Escape</h2>
                    <p>Como recompensa, aqu√≠ tienes acceso exclusivo al super enlace:</p>
                    <div class="super-link">
                        <a href="https://tron.fandom.com/wiki/TRON:_Legacy" target="_blank" class="btn btn-primary super-link-btn">
                            üåê Acceder a la Wiki Oficial de TRON: Legacy
                        </a>
                        <p class="link-description">
                            Explora la wiki oficial con informaci√≥n exclusiva, detr√°s de escenas, y contenido especial.
                        </p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script src="../js/game.js"></script>
    <script>
        // Verificar si el usuario est√° logueado
        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('tronUser'));
            if (!user) {
                alert('Debes iniciar sesi√≥n para acceder a Escape de TRON');
                window.location.href = '../index.html';
                return;
            }
            
            // Mostrar informaci√≥n del usuario
            document.getElementById('username-display').textContent = user.username;
            if (user.role === 'admin') {
                document.getElementById('username-display').innerHTML += ' <span class="admin-badge">ADMIN</span>';
            }
        });

        // Funci√≥n global para logout
        window.logout = function() {
            localStorage.removeItem('tronUser');
            window.location.href = '../index.html';
        };
    </script>
</body>
</html>